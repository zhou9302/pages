(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{352:function(t,v,_){"use strict";_.r(v);var r=_(42),a=Object(r.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"基于seo的前端渲染方案选型"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基于seo的前端渲染方案选型"}},[t._v("#")]),t._v(" 基于SEO的前端渲染方案选型")]),t._v(" "),_("h4",{attrs:{id:"搜索引擎的工作原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#搜索引擎的工作原理"}},[t._v("#")]),t._v(" 搜索引擎的工作原理:")]),t._v(" "),_("ol",[_("li",[t._v("爬虫在互联网上爬行，从一个链接到另一个链接，对内容进行分析，提炼关键词加入数据库中；如果爬虫认为是垃圾或重复信息，就舍弃继续爬行。当用户搜索时，就能检索出与关键字相关的网址显示给用户。")]),t._v(" "),_("li",[t._v("一个关键词对用多个网址，因此就出现了排序的问题，相应的当与关键词最吻合的网址就会排在前面了。在爬虫抓取网页内容，提炼关键词的这个过程中，就存在一个问题：爬虫能否看懂。如果网站内容是 flash 和 js 等，那么它是看不懂的，会犯迷糊，即使关键字再贴切也没用。相应的，如果网站内容可以被搜索引擎能识别，那么搜索引擎就会提高该网站的权重，增加对该网站的友好度。这样一个过程我们称之为 SEO(Search Engine Optimization)，即搜索引擎优化。")])]),t._v(" "),_("h3",{attrs:{id:"一、客户端渲染-csr-方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一、客户端渲染-csr-方案"}},[t._v("#")]),t._v(" 一、客户端渲染（CSR）方案")]),t._v(" "),_("img",{attrs:{src:t.$withBase("/imgs/SEO/CRS.png"),alt:"CRS"}}),t._v(" "),_("p",[_("strong",[t._v("SPA:")]),t._v("  在到达浏览器之前的html页面是没有内容的，要等到浏览器执行相应异步请求获取数据填充后才显示界面。")]),t._v(" "),_("h4",{attrs:{id:"优点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),_("ul",[_("li",[t._v("SPA 的优点（用户体验较好）页面切换流畅且可以添加动画")])]),t._v(" "),_("h4",{attrs:{id:"缺点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),_("ul",[_("li",[t._v("SEO不友好（爬虫如果没有执行js的能力，如百度，获取到的页面是空的，不利于网站推广）")]),t._v(" "),_("li",[t._v("首屏加载慢（到达浏览器端后再加载数据，增加用户等待时间）")])]),t._v(" "),_("h3",{attrs:{id:"二、服务端渲染-ssr-方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#二、服务端渲染-ssr-方案"}},[t._v("#")]),t._v(" 二、服务端渲染 （SSR）方案")]),t._v(" "),_("img",{attrs:{src:t.$withBase("/imgs/SEO/SSR.png"),alt:"SSR"}}),t._v(" "),_("p",[_("strong",[t._v("基本原理")]),t._v("： 在服务端起一个node应用，浏览器到来时，先拦截执行部分 js 异步请求，提前将数据填充到 html 页面中返回浏览器。这样爬虫抓取到的页面就是带数据的，有利于SEO")]),t._v(" "),_("h4",{attrs:{id:"优点-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优点-2"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),_("ul",[_("li",[t._v("SEO 友好")]),t._v(" "),_("li",[t._v("首屏渲染快（可在服务端缓存页面，请求到来直接给 html）")])]),t._v(" "),_("h4",{attrs:{id:"缺点-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缺点-2"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),_("ul",[_("li",[t._v("代码改动大、需要做特定SSR(Nuxt.js,Next.js)框架的改动（经过我们实践、原有SPA代码改动非常大）")]),t._v(" "),_("li",[t._v("丢失了部分SPA体验node 容易成为性能瓶颈")])]),t._v(" "),_("h3",{attrs:{id:"三、构建时预渲染方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#三、构建时预渲染方案"}},[t._v("#")]),t._v(" 三、构建时预渲染方案")]),t._v(" "),_("p",[_("strong",[t._v("基本原理")]),t._v("： 利用webpack 等构建工具，针对 SPA 应用开发后只有一个 index.html 文件入口问题，用上述预渲染中间件在前端项目构建时预先获取页面数据，生成多个页面，如 about、help 、contact 等页面，优化首屏渲染与部分页面SEO")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("solution")]),t._v(" "),_("th",[t._v("github Star")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("prerender-spa-plugin")]),t._v(" "),_("td",[t._v("6k")])]),t._v(" "),_("tr",[_("td",[t._v("puppeteer")]),t._v(" "),_("td",[t._v("63.2k")])]),t._v(" "),_("tr",[_("td",[t._v("phantomjs")]),t._v(" "),_("td",[t._v("1.4k")])])])]),t._v(" "),_("h4",{attrs:{id:"优点-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优点-3"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),_("ul",[_("li",[t._v("代码侵入性小")])]),t._v(" "),_("h4",{attrs:{id:"缺点-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缺点-3"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),_("ul",[_("li",[t._v("无法用于大量动态路径页面场景（动态路由）")]),t._v(" "),_("li",[t._v("无法获取到后台返回的数据")])]),t._v(" "),_("h3",{attrs:{id:"四、服务端动态渲染-利用user-agent"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#四、服务端动态渲染-利用user-agent"}},[t._v("#")]),t._v(" 四、服务端动态渲染（利用user-agent）")]),t._v(" "),_("br"),t._v(" "),_("img",{attrs:{src:t.$withBase("/imgs/SEO/Render.png"),alt:"Render"}}),t._v(" "),_("p",[_("strong",[t._v("基本原理")]),t._v("： 服务端对请求的 user-agent 进行判断，浏览器端直接给 SPA 页面，如果是爬虫，给经过动态渲染的 html 页面")]),t._v(" "),_("h4",{attrs:{id:"优点-4"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优点-4"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),_("ul",[_("li",[t._v("兼顾 SPA优点同时解决SEO问题")])]),t._v(" "),_("h4",{attrs:{id:"缺点-4"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缺点-4"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),_("ul",[_("li",[t._v("需要服务端应用（但动态渲染只针对爬虫、不会成为性能瓶颈）")])]),t._v(" "),_("br"),t._v(" "),_("img",{attrs:{src:t.$withBase("/imgs/SEO/nginx.png"),alt:"nginx"}}),t._v(" "),_("p",[_("strong",[t._v("社区方案：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("方案")]),t._v(" "),_("th",[t._v("github Star")]),t._v(" "),_("th",[t._v("描述")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("puppeteer")]),t._v(" "),_("td",[t._v("63.2k")]),t._v(" "),_("td",[t._v("可用于动态渲染、前端测试、操作模拟。API丰富")])]),t._v(" "),_("tr",[_("td",[t._v("rendertron")]),t._v(" "),_("td",[t._v("4.9k")]),t._v(" "),_("td",[t._v("动态渲染")])]),t._v(" "),_("tr",[_("td",[t._v("prerender.io")]),t._v(" "),_("td",[t._v("5.6k")]),t._v(" "),_("td",[t._v("动态渲染")])])])]),t._v(" "),_("br"),t._v(" "),_("p",[_("strong",[t._v("动态渲染相比SSR有几点明显好处:")])]),t._v(" "),_("ul",[_("li",[t._v("和 SSR 一致的 SEO 效果，通过 puppeteer 还可进一步定制 SEO 方案")]),t._v(" "),_("li",[t._v("node 应用负载压力小，只需应对爬虫请求，相当于只有爬虫来了页面才做SSR")]),t._v(" "),_("li",[t._v("从整体架构上来说相当于一个插件，可随时插拔，无副作用")]),t._v(" "),_("li",[t._v("不需要大量修改SPA代码（只在重复请求问题上用一个标志位去识别，当然也可以不管这个问题）")])]),t._v(" "),_("br"),t._v(" "),_("p",[_("strong",[t._v("常见爬虫 user-agent：")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("主题")]),t._v(" "),_("th",[t._v("user agent")]),t._v(" "),_("th",[t._v("用途")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("Google")]),t._v(" "),_("td",[t._v("googlebot")]),t._v(" "),_("td",[t._v("搜索引擎")])]),t._v(" "),_("tr",[_("td",[t._v("Google")]),t._v(" "),_("td",[t._v("google-structured-data-testing-tool")]),t._v(" "),_("td",[t._v("测试工具")])]),t._v(" "),_("tr",[_("td",[t._v("Google")]),t._v(" "),_("td",[t._v("Mediapartners-Google")]),t._v(" "),_("td",[t._v("Adsense广告网页被访问后，爬虫就来访")])]),t._v(" "),_("tr",[_("td",[t._v("Microsoft")]),t._v(" "),_("td",[t._v("bingbot")]),t._v(" "),_("td",[t._v("搜索引擎")])]),t._v(" "),_("tr",[_("td",[t._v("Linked")]),t._v(" "),_("td",[t._v("linkedinbot")]),t._v(" "),_("td",[t._v("应用内搜索")])]),t._v(" "),_("tr",[_("td",[t._v("百度")]),t._v(" "),_("td",[t._v("baiduspider")]),t._v(" "),_("td",[t._v("搜索引擎")])]),t._v(" "),_("tr",[_("td",[t._v("奇虎 360")]),t._v(" "),_("td",[t._v("360Spider")]),t._v(" "),_("td",[t._v("搜索引擎")])]),t._v(" "),_("tr",[_("td",[t._v("搜狗")]),t._v(" "),_("td",[t._v("Sogou Spider")]),t._v(" "),_("td",[t._v("搜索引擎")])]),t._v(" "),_("tr",[_("td",[t._v("Yahoo\tYahoo!")]),t._v(" "),_("td",[t._v("Slurp China")]),t._v(" "),_("td",[t._v("搜索引擎")])]),t._v(" "),_("tr",[_("td",[t._v("Yahoo\tYahoo!")]),t._v(" "),_("td",[t._v("Slurp")]),t._v(" "),_("td",[t._v("搜索引擎")])]),t._v(" "),_("tr",[_("td",[t._v("Twitter")]),t._v(" "),_("td",[t._v("twitterbot")]),t._v(" "),_("td",[t._v("应用内搜索")])]),t._v(" "),_("tr",[_("td",[t._v("Facebook")]),t._v(" "),_("td",[t._v("facebookexternalhit")]),t._v(" "),_("td",[t._v("应用内搜索")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("rogerbot")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("embedly")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("Quora")]),t._v(" "),_("td",[t._v("quora link preview")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("showyoubot")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("outbrain")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("pinterest")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("slackbot")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("vkShare")]),t._v(" "),_("td",[t._v("-")])]),t._v(" "),_("tr",[_("td",[t._v("-")]),t._v(" "),_("td",[t._v("W3C_Validator")]),t._v(" "),_("td",[t._v("-")])])])])])}),[],!1,null,null,null);v.default=a.exports}}]);